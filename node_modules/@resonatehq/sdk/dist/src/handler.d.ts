import type { Encoder } from "./encoder";
import type { Encryptor } from "./encryptor";
import { type ResonateError } from "./exceptions";
import type { CallbackRecord, ClaimTaskReq, CompletePromiseReq, CreateCallbackReq, CreatePromiseAndTaskReq, CreatePromiseReq, CreateSubscriptionReq, DurablePromiseRecord, Network, ReadPromiseReq, TaskRecord } from "./network/network";
export declare class Cache {
    private promises;
    private callbacks;
    private tasks;
    getPromise(id: string): DurablePromiseRecord<any> | undefined;
    setPromise(promise: DurablePromiseRecord<any>): void;
    getCallback(id: string): CallbackRecord | undefined;
    setCallback(id: string, callback: CallbackRecord): void;
    getTask(id: string): {
        id: string;
        counter: number;
    } | undefined;
    setTask(task: {
        id: string;
        counter: number;
    }): void;
}
export declare class Handler {
    private cache;
    private network;
    private encoder;
    private encryptor;
    constructor(network: Network, encoder: Encoder, encryptor: Encryptor);
    readPromise(req: ReadPromiseReq, done: (err?: ResonateError, res?: DurablePromiseRecord<any>) => void): void;
    createPromise(req: CreatePromiseReq<any>, done: (err?: ResonateError, res?: DurablePromiseRecord<any>) => void, func?: string, headers?: Record<string, string>, retryForever?: boolean): void;
    createPromiseAndTask(req: CreatePromiseAndTaskReq<any>, done: (err?: ResonateError, res?: {
        promise: DurablePromiseRecord<any>;
        task?: TaskRecord;
    }) => void, func?: string, headers?: Record<string, string>, retryForever?: boolean): void;
    completePromise(req: CompletePromiseReq<any>, done: (err?: ResonateError, res?: DurablePromiseRecord<any>) => void, func?: string): void;
    claimTask(req: ClaimTaskReq, done: (err?: ResonateError, res?: {
        root: DurablePromiseRecord<any>;
        leaf?: DurablePromiseRecord<any>;
    }) => void): void;
    createCallback(req: CreateCallbackReq, done: (err?: ResonateError, res?: {
        kind: "callback";
        callback: CallbackRecord;
    } | {
        kind: "promise";
        promise: DurablePromiseRecord<any>;
    }) => void, headers?: Record<string, string>): void;
    createSubscription(req: CreateSubscriptionReq, done: (err?: ResonateError, res?: DurablePromiseRecord<any>) => void, retryForever?: boolean): void;
    private decode;
}
//# sourceMappingURL=handler.d.ts.map